---
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import About from "../components/About.astro";
import Brand from "../components/Brand.astro";
import Projects from "../components/Projects.astro";
import Experience from "../components/Experience.astro";
import Certifications from "../components/Certifications.astro";
import Education from "../components/Education.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config";
import "../styles/global.css";

const siteBase = Astro.site ? Astro.site.toString().replace(/\/$/, "") : "https://itumor.github.io/Me";
const pageTitle = `${siteConfig.name} - ${siteConfig.title}`;
const pageDescription = siteConfig.description;
const pageUrl = siteBase;
const socialImage = "/Me/favicon.svg";

const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "Person",
    name: siteConfig.name,
    jobTitle: siteConfig.title,
    description: pageDescription,
    url: pageUrl,
    email: `mailto:${siteConfig.social.email}`,
    sameAs: [siteConfig.social.linkedin, siteConfig.social.github, siteConfig.social.twitter].filter(Boolean),
    knowsAbout: [
      "AWS",
      "Kubernetes",
      "EKS",
      "GitOps",
      "Terraform",
      "FinOps",
      "GreenOps",
      "Platform Engineering",
      "Crossplane",
      "CAST AI",
    ],
    hasCredential: (siteConfig.certifications || []).map((cert) => ({
      "@type": "EducationalOccupationalCredential",
      name: cert.name,
      issuer: cert.issuer,
      validFor: cert.date,
    })),
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: [
      {
        "@type": "Question",
        name: `Who is ${siteConfig.name}?`,
        acceptedAnswer: {
          "@type": "Answer",
          text: `${siteConfig.name} is an AWS and Kubernetes cloud architect based in Riga, Latvia, focused on secure, automated, and cost-efficient platforms across EU and EMEA.`,
        },
      },
      {
        "@type": "Question",
        name: "What does he specialize in?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "Designing AWS landing zones, EKS platforms, GitOps delivery with Terraform and Crossplane, and FinOps/GreenOps practices using CAST AI.",
        },
      },
      {
        "@type": "Question",
        name: "How can you contact him?",
        acceptedAnswer: {
          "@type": "Answer",
          text: `Reach out via email at ${siteConfig.social.email} or LinkedIn at ${siteConfig.social.linkedin}.`,
        },
      },
      {
        "@type": "Question",
        name: "What certifications does he hold?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "AWS Certified Solutions Architect â€“ Associate, CKA, CKAD, KCNA, Certified SAFe Practitioner, CCNA, and CAST AI certifications.",
        },
      },
    ],
  },
];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/Me/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={pageDescription} />
    <meta name="robots" content="index,follow" />
    <meta name="theme-color" content={siteConfig.accentColor} />
    <link rel="canonical" href={pageUrl} />

    <meta property="og:type" content="profile" />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />
    <meta property="og:url" content={pageUrl} />
    <meta property="og:image" content={socialImage} />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content={pageTitle} />
    <meta name="twitter:description" content={pageDescription} />
    <meta name="twitter:image" content={socialImage} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <title>{pageTitle}</title>
    <script type="application/ld+json">
      {JSON.stringify(structuredData)}
    </script>
  </head>
  <body>
    <Header />
    <section>
      <Hero />
      <About />
      <Brand />
      <Projects />
      <Experience />
      <Certifications />
      <Education />
    </section>
    <Footer />
  </body>
</html>
